<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>

        .outer {
            width: 200px;
            height: 200px;
            background-color: black;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .inner {
            background-color: red;
            width: 100px;
            height: 100px;
        }
    </style>
  </head>
  <body>
    <div class="outer">
      <div class="inner"></div>
    </div>
  </body>

  <script>
    var outer = document.querySelector(".outer");
    var inner = document.querySelector(".inner");

    // Let's listen for attribute changes on the
    // outer element
    //监听element属性变化
    new MutationObserver(function () {
      console.log("mutate");
    }).observe(outer, {
      attributes: true,
    });

    // Here's a click listener…
    function onClick() {
      console.log("click");

      setTimeout(function () {
        console.log("timeout");
      }, 0);

      Promise.resolve().then(function () {
        console.log("promise");
      });

      outer.setAttribute("data-random", Math.random());
    }

    // …which we'll attach to both elements
    inner.addEventListener("click", onClick);
    outer.addEventListener("click", onClick);
    inner.click();
  </script>
</html>
